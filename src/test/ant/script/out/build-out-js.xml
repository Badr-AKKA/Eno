<?xml version="1.0" encoding="UTF-8"?>
<project name="enoJs" basedir=".">

	<property name="out-extension" value="xml"/>
	<property name="out-folder" value="lunatic"/>

	<!-- jsPostProcessing : sort elements ; add generic questions ; put variables to the end -->
	<target name="jsPostProcessing">		
		<xslt in="${postprocessing-input-file}"
			out="${target-folder}/${survey-name}/${form-name}/form/form-sorted.${out-extension}"
			style="${xslt.home}/post-processing/js/sort-components.xsl" classpath="${saxon.jar}" force="true">
		</xslt>
		
		<xslt in="${target-folder}/${survey-name}/${form-name}/form/form-sorted.${out-extension}"
			out="${target-folder}/${survey-name}/${form-name}/form/form-end-questions.${out-extension}"
			style="${xslt.home}/post-processing/js/insert-generic-questions.xsl" force="true" classpath="${saxon.jar}">
			<param name="properties-file" expression="${config-folder}/${Properties.InFormat}2${Properties.OutFormat}.xml"/>
		</xslt>
		
		<xslt in="${target-folder}/${survey-name}/${form-name}/form/form-end-questions.${out-extension}"
			out="${target-folder}/${survey-name}/${form-name}/form/form.${out-extension}"
			style="${xslt.home}/post-processing/js/externalize-variables.xsl" force="true" classpath="${saxon.jar}">
		</xslt>
		
	</target>
</project>
